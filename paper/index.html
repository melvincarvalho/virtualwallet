<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xml:lang="en" lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Virtual Wallet</title>
  <link rel="stylesheet" media="all" title="LNCS" href="media/css/lncs.css"/>
  <link rel="stylesheet alternate" media="all" title="ACM" href="media/css/acm.css"/>
  <link rel="stylesheet alternate" href="http://www.w3.org/StyleSheets/TR/W3C-REC.css" media="all" title="W3C-REC"/>
  <link rel="stylesheet" media="all" href="media/css/lr.css"/>
  <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script src="scripts/html.sortable.min.js"></script>
  <script src="scripts/lr.js"></script>
</head>

<body about="http://virtualwallet.org/paper/" typeof="foaf:Document sioc:Post biblio:Paper prov:Entity" class="hfeed" prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs: http://www.w3.org/2000/01/rdf-schema# owl: http://www.w3.org/2002/07/owl# xsd: http://www.w3.org/2001/XMLSchema# dcterms: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ v: http://www.w3.org/2006/vcard/ns# pimspace: http://www.w3.org/ns/pim/space# cc: http://creativecommons.org/ns# skos: http://www.w3.org/2004/02/skos/core# prov: http://www.w3.org/ns/prov# schema: http://schema.org/ rsa: http://www.w3.org/ns/auth/rsa# cert: http://www.w3.org/ns/auth/cert# cal: http://www.w3.org/2002/12/cal/ical# wgs: http://www.w3.org/2003/01/geo/wgs84_pos# org: http://www.w3.org/ns/org# biblio: http://purl.org/net/biblio# bibo: http://purl.org/ontology/bibo/ book: http://purl.org/NET/book/vocab# ov: http://open.vocab.org/terms/ doap: http://usefulinc.com/ns/doap# dbr: http://dbpedia.org/resource/ dbp: http://dbpedia.org/property/ sio: http://semanticscience.org/resource/ opmw: http://www.opmw.org/ontology/ deo: http://purl.org/spar/deo/ doco: http://purl.org/spar/doco/ cito: http://purl.org/spar/cito/ fabio: http://purl.org/spar/fabio/ sro: http://salt.semanticauthoring.org/ontologies/sro# this: http://virtualwallet.org/paper/">
  <article class="hentry">

    <h1 class="entry-title" property="dcterms:title">Virtual Wallet</h1>

    <div id="authors">
      <dl id="author-name">
        <dt>Authors</dt>
        <dd id="author-1"><span about="http://virtualwallet.org/paper/" rel="dcterms:creator dcterms:publisher dcterms:contributor"><a about="http://melvincarvalho.com/#me" typeof="foaf:Person" rel="foaf:homepage" property="foaf:name" href="http://melvincarvalho.com/">Melvin Carvalho</a></span><sup><a href="#author-email-1">X</a></sup></dd>
      </dl>

      <ul id="author-email">
        <li id="author-email-1"><sup>X</sup><a about="http://melvincarvalho.com/#me" rel="foaf:mbox" href="mailto:melvincarvalho@gmail.com">melvincarvalho@gmail.com</a></li>
      </ul>
    </div>

    <dl id="document-identifier">
      <dt>Document ID</dt>
      <dd><a href="http://virtualwallet.org/paper/">http://virtualwallet.org/paper/</a></dd>
    </dl>

    <dl id="document-published">
      <dt>Published</dt>
      <dd property="dcterms:published" content="2014-12-08T00:00:00Z" datatype="xsd:dateTime">2015-03-24</dd>
    </dl>

    <dl id="document-modified">
      <dt>Modified</dt>
      <dd property="dcterms:modified" content="2014-12-08T00:00:00Z" datatype="xsd:dateTime">2015-03-24</dd>
    </dl>

    <dl id="document-license">
      <dt>License</dt>
      <dd><a about="http://virtualwallet.org/paper/" rel="license cc:license" href="http://creativecommons.org/licenses/by-sa/4.0/" title="Creative Commons Attribution-ShareAlike 4.0 Unported">CC BY-SA 4.0</a></dd>
    </dl>



    <dl id="document-purpose">
      <dt>Purpose</dt>
      <dd property="schema:purpose">Linked data based Virtual Wallet.</dd>
    </dl>


    <div id="content" class="entry-content">
      <section id="abstract" about="http://virtualwallet.org/paper/">
        <h2>Abstract</h2>
        <div property="dcterms:abstract" class="entry-summary">
          <p>We present a virtual wallet powered by linked data.  It will allow users to send money and check their balance in a decentralized way and using web standards.
            The wallet will operate with realtime updates running on a web browser or device, be highly integrated with other systems and be currency agnostic.</p>
          </div>
        </section>

        <section id="keywords" about="http://virtualwallet.org/paper/">
          <h2>Keywords</h2>
          <div>
            <ul rel="dcterms:subject">
              <li><a resource="http://dbpedia.org/resource/Linked_Data" href="http://en.wikipedia.org/wiki/Linked_Data">Linked Data</a></li>
            </ul>
          </div>
        </section>

        <section id="introduction" about="http://virtualwallet.org/paper/" rel="dcterms:hasPart" resource="[this:#introduction]">
          <h2 about="[this:#introduction]" property="dcterms:title">Introduction</h2>
          <div about="[this:#introduction]" property="dcterms:description" typeof="deo:Introduction">
            <p id="prologue" about="http://virtualwallet.org/paper/" rel="dcterms:hasPart"><span about="[this:#prologue]" typeof="deo:Prologue" property="dcterms:description" rel="cito:parodies" resource="http://dbpedia.org/resource/Where_no_man_has_gone_before">
              Commerce on the internet has grown in recent years, but suffers from some of the artifacts of the pre digital age.  Transactions normally go through a
              limited number of trusted third parties, have high costs, and are difficult to integrate into typical digital web flows.  We propose a wallet system based
              on Web standards and REST that is standards compliant and offers a highly integregrable way to check balances, pay others, deposit and withdraw, that is currency neutral,
              can work with any device that talks HTTP and operates in near realtime.</span></p>

              <p id="motivation" about="http://virtualwallet.org/paper/" rel="dcterms:hasPart"><span about="[this:#motivation]" typeof="sro:Motivation" property="dcterms:description"></span></p>

              <p></p>


            </div>
          </section>


          <section id="requirements" about="http://virtualwallet.org/paper/" rel="dcterms:hasPart" resource="[this:#requirements]">
            <h2 about="[this:#requirements]" property="dcterms:title">Non-Functional Requirements</h2>
            <div about="[this:#requirements]" property="dcterms:description">

              <section id="decentralization" about="[this:requirements]" rel="dcterms:hasPart" resource="[this:#decentralization]">
                <h3 about="[this:#decentralization]" property="dcterms:title">Decentralization</h3>
                <div about="[this:#decentralization]" property="dcterms:description">
                  <p>As much of the system as possible should be decentralized.  This includes, identity, accounts, payment providers, wallets and messaging.  This
                  is achieved by giving anything of note a URI.  That allows any domain to host any aspect of the system.  The app is 100% client side and only relies
                  on commodoty storage as a backend, via linked data platform.</p>
            </div>
          </section>

          <section id="accessibility" about="[this:requirements]" rel="dcterms:hasPart" resource="[this:#accessibility]">
            <h3 about="[this:#accessibility]" property="dcterms:title">Accessibility</h3>
            <div about="[this:#accessibility]" property="dcterms:description">
              <p>Accessiblity and ARIA guidelines are a goal of the project, so that as many people and possible can use wallets</p>
        </div>
      </section>


  <section id="standards" about="[this:requirements]" rel="dcterms:hasPart" resource="[this:#standards]">
    <h3 about="[this:#standards]" property="dcterms:title">Web Standards</h3>
    <div about="[this:#standards]" property="dcterms:description">
      <p>As far as possible this project aims to reuse web standards and work done by the W3C.  The main items followed are W3C Design Issues, WebID, Linked Data, Linked Data Platform,
      HTML5, RESTful principles and Websockets.</p>

</div>
</section>


<section id="security" about="[this:requirements]" rel="dcterms:hasPart" resource="[this:#security]">
  <h3 about="[this:#security]" property="dcterms:title">Security</h3>
  <div about="[this:#security]" property="dcterms:description">
    <p>Work is done on security, in particular the tools used are Web Access Control, and TLS.  More tools will be added over time.</p>

</div>
</section>


</div>
</section>


<section id="conceptual-design" about="http://virtualwallet.org/paper/" rel="dcterms:hasPart" resource="[this:#conceptual-design]">
  <h2 about="[this:#conceptual-design]" property="dcterms:title">Conceptual Design</h2>
  <div about="[this:#conceptual-design]" property="dcterms:description">
    <p>The system deals with discovery of information, from user, to payment processor to account.  It deals with showing balances and transactions using HTTP GET,
    with payments, deposits and withrawls, using HTTP PUT/POST.  The system also provides a mechanism for realtime notifications using websockets.</p>

  </div>


  <section id="discovery" about="[this:requirements]" rel="dcterms:hasPart" resource="[this:#discovery]">
    <h3 about="[this:#discovery]" property="dcterms:title">Discovery</h3>
    <div about="[this:#discovery]" property="dcterms:description">
      <p>Discovery is the act of following a pointer or string in order to establish more information.  The primary technicque, for discovery, is
      "Follow You Nose", dereferencing the identifier, usually using HTTP and finding out more information.  As a temporary or fallback measure well known locations
      can be used, or search engines, to augment follow your nose.</p>

</div>
</section>


<section id="balances" about="[this:requirements]" rel="dcterms:hasPart" resource="[this:#balances]">
  <h3 about="[this:#balances]" property="dcterms:title">Balances</h3>
  <div about="[this:#balances]" property="dcterms:description">
    <p>In our system any URI can have a balance and operate as a wallet or bank account.  The system will integently route payments to the right place.  The system deals
    with two types of URI to begin with.  Agents and Accounts.  A person is a URI that denotes an a Person, organization or Group.  An account is a sub division, normally
    within a payment processor that is assigned to an agent.  Balances will be returned for the given URI, normally containing that URI, the amount and the currency.  Currently located at
    /api/v1/tx?uri= the format is</p>


      <p><pre>{"@id":"http://melvincarvalho.com/#me",
        "amount":250,
        "currency":"https://w3id.org/cc#mark"}
      </pre></p>

        <p>In order to scale, transaction history is limited to 100 by default.  Another API not yet created, will allow access to archives.</p>

      </div>
    </section>


    <section id="transactions" about="[this:requirements]" rel="dcterms:hasPart" resource="[this:#transactions]">
      <h3 about="[this:#transactions]" property="dcterms:title">Transaction History</h3>
      <div about="[this:#transactions]" property="dcterms:description">
        <p>Transaction History is an API that returns transactions for a given URI (account or agent) in JSON or turtle format.
          Currently the location is : /api/v1/tx?uri= but this needs to become more scalable.  The format supported so far is JSON.</p>


          <p><pre>{"@id":"ni:///sha-256;dTlpZmY3L1pJUEoxLy90VWkxR00xUFhZQTY5eUdJckpWY04zdXk3elJwdz0",
            "source":"http://bitbots.org/workbot#this",
            "amount":250,
            "currency":"https://w3id.org/cc#mark",
            "destination":"http://melvincarvalho.com/#me",
            "timestamp":"2015-03-28T09:55:29.803Z",
            "context":null,
            "description":"work"}</pre></p>

            <p>In order to scale, transaction history is limited to 100 by default.  Another API not yet created, will allow access to archives.</p>

          </div>
        </section>


        <section id="payment" about="[this:requirements]" rel="dcterms:hasPart" resource="[this:#payment]">
          <h3 about="[this:#payment]" property="dcterms:title">Payments</h3>
          <div about="[this:#payment]" property="dcterms:description">
            <p>Payments are initiated using HTTP PUT/POST.  Having found the payment area of a users payment processor (using follow your nose)
            the there will normally be an area to create a new payment, typically a linked data platform container.  A PUT or POST to this container
            will trigger a down stream process listening on the web socket to process the new transaction.  A typical payment may look like:</p>


              <p><pre>{"@id":"ni:///sha-256;dTlpZmY3L1pJUEoxLy90VWkxR00xUFhZQTY5eUdJckpWY04zdXk3elJwdz0",
                "source":"http://bitbots.org/workbot#this",
                "amount":250,
                "currency":"https://w3id.org/cc#mark",
                "destination":"http://melvincarvalho.com/#me",
                "timestamp":"2015-03-28T09:55:29.803Z",
                "description":"work"}</pre></p>

                <p>A payment processor must be able to handle payments for any URI so we sha256 hash the URI to create a sub directory such that each user gets
                a unique payments area.  Currently this logic is built into the client, but later it will move to the ontology or to more granular discovery.</p>

                <p>Generally the @id will be added afterward, in our implementation it's the hash of the canaonical form of the data.  Downstream processing
                is not covered in this document, but typically the transaction will be validated, checked for access control, checked that the amount is in the
                allowed range, moved to either an OK or error condition, which is reflected in the API.  Our implementation uses the web credits system.  After
                processing the websocket is again triggered so that connected agents can update.</p>

              </div>
            </section>


        <section id="notifications" about="[this:requirements]" rel="dcterms:hasPart" resource="[this:#notifications]">
          <h3 about="[this:#notifications]" property="dcterms:title">Notifications</h3>
          <div about="[this:#notifications]" property="dcterms:description">
            <p>Notifications are designed to be recieved in realtime.  The typical notification is of a new transaction.
              The transaction history should update in realtime if a payment is sent of received.  A popup will appear on desktop
              machines, as well as a sound effect.  On mobile devices the HTML5 vibrate API will be used.</p>

              <p>In order to determine a new transaction, a cache of the previous transactions are kept.  When the new list is pulled in,
                it is compared with the old list to see if there are any new IDs to be entered.  If so the notifcations function will be triggered.</p>

                <p>A new set of transactions is pulled in when a websocket is triggered.  Currently every user has a transactions directory located at a well known location
                  (later this will come from the payment provider), then hash(URI) as a subdirectory, and the websocket
                  watches for changes in the ",meta" file in that directory using a send of "sub URI".  While this works well now, more work is needed on a global
                  decentralized notification system, perhaps using streaming data.  The websocket is located at the root of the payment pfovoder, or should be returned in the
                  Updates-Via header.</p>

                </div>
              </section>


            </section>


            <section id="components" about="http://virtualwallet.org/paper/" rel="dcterms:hasPart" resource="[this:#components]">
              <h2 about="[this:#components]" property="dcterms:title">Components</h2>
              <div about="[this:#components]" property="dcterms:description">
                <p>As far as possible this project aims to reuse web standards and work done by the W3C.  The main items followed are W3C Design Issues, WebID, Linked Data, Linked Data Platform,
                HTML5, RESTful principles and Websockets</p>

                <section id="WebID" about="[this:#challenges]" rel="dcterms:hasPart" resource="[this:#WebID]">
                  <h3 about="[this:#WebID]" property="dcterms:title">WebID</h3>
                  <div about="[this:#WebID]" property="dcterms:description">
                    <p>WebID will be used for Identity.  A WebID is an HTTP URI that denotes an Agent.  Hash URIs are preferred.  The system can later be exteneded to include any URI such as email,
                    hashes, tel: and devices.</p>
                  </div>
                </section>

                <section id="LDP" about="[this:#challenges]" rel="dcterms:hasPart" resource="[this:#LDP]">
                  <h3 about="[this:#LDP]" property="dcterms:title">LDP</h3>
                  <div about="[this:#LDP]" property="dcterms:description">
                    <p>Linked Data Principles will be used throughout this work, and Linked Data Platform as a commodity back end.</p>
                  </div>
                </section>

                <section id="webcredits" about="[this:#challenges]" rel="dcterms:hasPart" resource="[this:#webcredits]">
                  <h3 about="[this:#webcredits]" property="dcterms:title">Web Credits</h3>
                  <div about="[this:#webcredits]" property="dcterms:description">
                    <p>The web credits ontology will be used as a simple way to track credits between URIs.</p>
                  </div>
                </section>

                <section id="webpayments" about="[this:#challenges]" rel="dcterms:hasPart" resource="[this:#webpayments]">
                  <h3 about="[this:#webpayments]" property="dcterms:title">W3C Web Payments</h3>
                  <div about="[this:#webpayments]" property="dcterms:description">
                    <p>The work by the W3C web payments community group will be leveraged as much as possible.</p>
                  </div>
                </section>


              </div>
            </section>

            <section id="implementation" about="http://virtualwallet.org/paper/" rel="dcterms:hasPart" resource="[this:#implementation]">
              <h2 about="[this:#implementation]" property="dcterms:title">Implementation</h2>
              <div about="[this:#implementation]" property="dcterms:description" typeof="deo:Results">
                <p>An implementation of this work is available on github as free software under the MIT license.</p>
              </div>

              <figure id="screenshot" about="[this:#screenshot]" typeof="doco:FigureBox" rel="dcterms:hasPart">
                <object id="figure-data-linked-statistical-data-analysis" about="[this:#figure-data-linked-statistical-data-analysis]" typeof="doco:Figure" rel="foaf:depiction" resource="http://stats.270a.info/plots/fa698e46868fe348865678884e89ef84b0be6c64.svg" type="image/svg+xml" data="http://virtualwallet.org/paper/paper.png" width="480" height="794"><a rel="dcterms:source" href="http://stats.270a.info/analysis/worldbank:SP.DYN.IMRT.IN/transparency:CPI2009/year:2009">Source</a></object>

                <figcaption about="[this:#figure-label-linked-statistical-data-analysis]" typeof="doco:FigureLabel" property="dcterms:description">Screenshot.</figcaption>
              </figure>

            </section>

            <section id="conclusions" about="http://virtualwallet.org/paper/" rel="dcterms:hasPart" resource="[this:#conclusions]">
              <h2 about="[this:#conclusions]" property="dcterms:title">Conclusions</h2>
              <div about="[this:#conclusions]" property="dcterms:description" typeof="sro:Conclusion">
                <p>In this article, we have discussed a way to create virutal wallets using web standards, in a decentralized way.  The hope is that this will allow low cost
                integration of web payments in a number of expected and unexpected scearios with an aim to maximize value creation.  Further work will include an app integration
                framework to allow typical apps on the web plaform to integrate payments cheaply and easily.</p>
              </div>
            </section>

            <section id="acknowledgements" about="http://virtualwallet.org/paper/" rel="dcterms:hasPart" resource="[this:#acknowledgements]">
              <h2 about="[this:#acknowledgements]" property="dcterms:title">Acknowledgements</h2>
              <div about="[this:#acknowledgements]" property="dcterms:description" typeof="deo:Acknowledgements">
                <p>We would like to extend our thanks to those individuals and groups working to make the Web better. A special thanks to <a about="http://virtualwallet.org/paper/" rel="cito:isReviewedBy" resource="http://deiu.rww.io/profile/card#me" href="http://deiu.rww.io/profile/card#me">Andrei Sambra</a> and MIT DIG for leading the way.</p>
              </div>
            </section>

            <section id="references">
              <h2>References</h2>
              <div>
                <ol>
                  <li id="ref-3">Principles of Design, <a about="[this:#conceptual-design]" rel="dcterms:references cito:citesAsSourceDocument cito:citesAsRecommendedReading" href="http://www.w3.org/DesignIssues/Principles.html#PLP">http://www.w3.org/DesignIssues/Principles.html#PLP</a></li>
                </ol>
              </div>
            </section>
          </div>

        </article>
      </body>
      </html>
